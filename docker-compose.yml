services:
  # MCP server (stdio transport)
  mcp:
    build: .
    stdin_open: true
    tty: true
    volumes:
      - ./data:/data
    security_opt:
      - no-new-privileges:true
    read_only: true
    tmpfs:
      - /tmp

  # CLI for one-off commands
  cli:
    build: .
    entrypoint: ["pdf-mod"]
    volumes:
      - ./data:/data
    security_opt:
      - no-new-privileges:true
    read_only: true
